
<meta charset="utf-8">
<script src="../../../jquery-3.6.0.min.js"></script>
<script type="text/javascript">

//Ajax関数
function getData() {
    //
    var incode = $("#postcode").val();
    $.ajax({
        type: 'get'
      , url: 'https://zip-cloud.appspot.com/api/search'
      , dataType:'jsonp'        // 応答のデータの種類 
      , data: { 
            zipcode: incode     // 郵便番号
        }
      , jsonp: 'callback'       //コールバックパラメータ名の指定 callback{データ}の形で格納？
    }).done(function(res){
        // ajaxがOK
        if (res.status === 200) {
    var str = "";
            var str2 = "";
            var obj = res.results[0]; //resの１つ目のデータ

            str = obj.prefcode; //都道府県コード
            str2 = obj.address1; //都道府県名
            $("#prefcode").val(str).text(str2) 

            str = obj.address2 + obj.address3; //市区町村
            $("#address").val(str)
            document.getElementById('address').focus(); //カーソルを移動
        } else {
            alert('郵便番号を確認してください。エラー:' + res.status);
        }
    }).fail(function() {
        // 取得エラー
        alert('取得エラー');
    });
    return false;
}
</script>
